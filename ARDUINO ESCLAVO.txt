//Arduino Esclavo/Receiver

#include <avr/io.h>
#include <util/delay.h>
#include <Servo.h>
#include <avr/eeprom.h>

#define NUM_SERVOS 6

Servo servo[NUM_SERVOS];
uint8_t servoPin[NUM_SERVOS] = {8, 9, 10, 11, 12, 13};

void setup() {
  Serial.begin(9600);

  for (uint8_t i = 0; i < NUM_SERVOS; i++) {
    servo[i].attach(servoPin[i]);
  }
}

void loop() {
  if (Serial.available() >= NUM_SERVOS) {
    for (uint8_t i = 0; i < NUM_SERVOS; i++) {
      uint8_t pos = Serial.read();
      servo[i].write(pos);
    }
  }
  
  // Delay to allow time for the servos to move
  _delay_ms(50);
}

// Replay function to move servos based on recorded positions
void replayMovement() {
  for (uint8_t i = 0; i < NUM_SERVOS; i++) {
    uint8_t pos = eeprom_read_byte((uint8_t*)i);
    servo[i].write(pos);
  }
}
